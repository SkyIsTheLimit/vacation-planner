<!--
  Generated template for the DiscoveryPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="primary">
    <ion-title>Discover you're next trip!</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col>
        <button ion-button color="primary" round block (click)="find()">Find</button>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label stacked>Start Date</ion-label>
          <ion-datetime displayFormat="DD/MM/YYYY" [(ngModel)]="criteria.startDate"></ion-datetime>
        </ion-item>
      </ion-col>

      <ion-col>
        <ion-item>
          <ion-label stacked>End Date</ion-label>
          <ion-datetime displayFormat="DD/MM/YYYY" [(ngModel)]="criteria.endDate"></ion-datetime>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <ion-searchbar [(ngModel)]="destinationSearch" (ngModelChange)="fetchSuggestions()" (search)="addDestination(newDestination, $event)"
          (ionCancel)="onCancel($event)" placeholder="Search for a city..."></ion-searchbar>

        <ion-list>
          <button ion-item *ngFor="let suggestion of suggestions" (click)="addDestination(suggestion, $event)">{{ suggestion.description }}</button>
        </ion-list>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <ion-card>
          <ion-card-header>
            Destinations Selected
          </ion-card-header>

          <ion-list>
            <ion-item>
              <p>{{ (destinations ? destinations.length : 0) }} destinations selected.</p>
            </ion-item>
            <ion-item-sliding *ngFor="let destination of criteria.destinations">
              <ion-item>
                <p *ngIf="criteria.destinations.length === 0">No destinations selected!</p>
                <p *ngIf="criteria.destinations.length !== 0">{{ destination.description }}</p>
              </ion-item>

              <ion-item-options slide="left">
                <button ion-button color="danger" (click)="removeDestination(destination, $index)">
                  <ion-icon name="trash"></ion-icon>
                </button>
              </ion-item-options>
            </ion-item-sliding>
          </ion-list>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
